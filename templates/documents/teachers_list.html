{% extends 'base.html' %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="bg-gradient-to-r from-purple-600 to-purple-500 rounded-2xl shadow-lg p-8 text-white">
        <h1 class="text-3xl font-bold mb-2">ðŸ“š Gestion des Professeurs</h1>
        <p class="text-purple-100">TÃ©lÃ©chargez l'emploi du temps complet et la liste des Ã©tudiants pour chaque professeur</p>
    </div>

    <!-- Liste des profs -->
    <div class="grid gap-4">
        {% if teachers %}
            {% for teacher in teachers %}
                {% with cohort_count=teacher.assigned_cohorts.count %}
                <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow p-6 border-l-4 border-purple-500">
                    <div class="flex items-center justify-between gap-4">
                        <!-- Info Prof -->
                        <div class="flex-1 min-w-0">
                            <h3 class="text-lg font-semibold text-slate-800 truncate">
                                {{ teacher.first_name }} {{ teacher.last_name }}
                            </h3>
                            <p class="text-sm text-slate-600 mt-1 truncate">
                                ðŸ“§ {{ teacher.email }}
                            </p>
                            {% if teacher.phone_number %}
                            <p class="text-sm text-slate-600 truncate">
                                ðŸ“± {{ teacher.phone_number }}
                            </p>
                            {% endif %}
                            
                            <!-- Stat groupes -->
                            <div class="mt-3 flex gap-2">
                                <span class="inline-block px-3 py-1 bg-purple-100 text-purple-700 text-sm font-semibold rounded-full">
                                    {{ cohort_count }} groupe{{ cohort_count|pluralize }}
                                </span>
                                {% with session_count=teacher.sessions.count %}
                                    {% if session_count > 0 %}
                                    <span class="inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-full">
                                        {{ session_count }} sÃ©ance{{ session_count|pluralize }}
                                    </span>
                                    {% endif %}
                                {% endwith %}
                            </div>
                        </div>
                        
                        <!-- Bouton download -->
                        {% if cohort_count > 0 %}
                        <a href="{% url 'documents:download_teacher_document' teacher.id %}" 
                           class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-700 hover:to-emerald-600 text-white font-semibold rounded-xl transition-all transform hover:scale-105 shadow-md hover:shadow-lg whitespace-nowrap flex-shrink-0">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                            </svg>
                            TÃ©lÃ©charger
                        </a>
                        {% else %}
                        <div class="inline-flex items-center gap-2 px-6 py-3 bg-slate-200 text-slate-500 font-semibold rounded-xl cursor-not-allowed flex-shrink-0">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                            </svg>
                            Aucun groupe
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endwith %}
            {% endfor %}
        {% else %}
            <div class="bg-purple-50 border-2 border-purple-200 rounded-xl p-8 text-center">
                <svg class="w-16 h-16 mx-auto text-purple-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                </svg>
                <p class="text-slate-600 text-lg">Aucun professeur disponible</p>
            </div>
        {% endif %}
    </div>
</div>

<style>
    /* Smooth animations */
    * {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }
</style>
{% endblock %}
